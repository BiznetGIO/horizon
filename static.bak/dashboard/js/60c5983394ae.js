(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('DeleteObjectsModalController',DeleteObjectsModalController);DeleteObjectsModalController.$inject=['horizon.dashboard.project.containers.containers-model','selected','$uibModalInstance'];function DeleteObjectsModalController(model,selected,$uibModalInstance){var ctrl=this;ctrl.model={container:model.container,collection:[],counted:{files:0,folders:0},deleted:{files:0,folders:0,failures:0},mode:'discovery',running:true,cancel:false};model.recursiveCollect(ctrl.model,selected,ctrl.model.collection).then(function complete(){ctrl.model.running=false;});ctrl.dismiss=function dismiss(){ctrl.model.cancel=true;$uibModalInstance.dismiss();};ctrl.action=function action(){if(ctrl.model.mode==='discovery'){ctrl.model.mode='deletion';ctrl.model.running=true;return model.recursiveDelete(ctrl.model,{tree:ctrl.model.collection}).then(function done(){ctrl.model.running=false;});}else{$uibModalInstance.close();}};}}());