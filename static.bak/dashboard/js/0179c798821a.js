(function(){'use strict';angular.module('horizon.dashboard.identity.roles').factory('horizon.dashboard.identity.roles.actions.edit.service',editService);editService.$inject=['horizon.dashboard.identity.roles.resourceType','horizon.dashboard.identity.roles.role-schema','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.widgets.form.ModalFormService','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.toast.service'];function editService(resourceType,schema,keystoneAPI,policy,modalFormService,actionResultService,toast){var service={allowed:allowed,perform:perform,onLoad:onLoad,submit:submit,onSuccess:onSuccess};return service;function allowed(){return policy.ifAllowed({rules:[['identity','identity:update_role']]});}
function perform(role){return keystoneAPI.getRole(role.id).then(service.onLoad);}
function onLoad(response){var config={title:gettext('Edit Role'),schema:schema,form:['*'],model:response.data};return modalFormService.open(config).then(service.submit);}
function submit(context){return keystoneAPI.editRole(context.model).then(service.onSuccess);}
function onSuccess(response){toast.add('success',gettext('Role updated successfully.'));return actionResultService.getActionResult().updated(resourceType,response.config.data.id).result;}}})();