(function(){'use strict';angular.module('horizon.app.core.keypairs').controller('KeypairController',KeypairController);KeypairController.$inject=['horizon.dashboard.project.workflow.launch-instance.basePath','horizon.app.core.openstack-service-api.nova','horizon.framework.widgets.modal-wait-spinner.service','$window','$uibModal'];function KeypairController(basePath,nova,spinnerService,$window,$uibModal){var ctrl=this;ctrl.createKeyPair=createKeyPair;function setKeyPairs(config){return function(response){var keyPairs=response.data.items.map(getName);$uibModal.open({templateUrl:basePath+'keypair/create-keypair.html',controller:'LaunchInstanceCreateKeyPairController as ctrl',windowClass:'modal-dialog-wizard',resolve:{existingKeypairs:getKeypairs}}).result.then(go(config.successUrl));function getName(item){return item.keypair.name;}
function getKeypairs(){return keyPairs;}};}
function createKeyPair(config){nova.getKeypairs().then(setKeyPairs(config));}
function go(url){return function changeUrl(){spinnerService.showModalSpinner(gettext('Please Wait'));$window.location.href=url;};}}})();