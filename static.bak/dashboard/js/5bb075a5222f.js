(function(){'use strict';angular.module('horizon.framework.util.validators').directive('validateUnique',validateUnique);function validateUnique(){var directive={require:'ngModel',restrict:'A',link:link};return directive;function link(scope,element,attrs,ctrl){ctrl.$parsers.push(validate);ctrl.$formatters.push(validate);attrs.$observe('validateUnique',function(){validate(ctrl.$modelValue);});function validate(value){var param=scope.$eval(attrs.validateUnique);var unique=true;if(angular.isArray(param)&&param.length>0){unique=param.indexOf(value)<0;}else if(angular.isFunction(param)){unique=param(value);}
ctrl.$setValidity('unique',unique);return value;}}}})();