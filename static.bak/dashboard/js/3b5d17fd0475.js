(function(){'use strict';angular.module('horizon.framework.util.file').factory('horizon.framework.util.file.file-reader',fileReaderService);fileReaderService.$inject=['$q'];function fileReaderService($q){var service={readTextFile:readTextFile};return service;function readTextFile(file,fileReader){var reader=fileReader||new FileReader();var deferred=$q.defer();reader.onloadend=loadEnd;reader.readAsArrayBuffer(file.slice(0,file.size));return deferred.promise;function loadEnd(e){var charArray=new Uint8Array(e.target.result);var textContent=[].map.call(charArray,strFromCharCode).join('');deferred.resolve(textContent);function strFromCharCode(char){return String.fromCharCode(char);}}}}})();